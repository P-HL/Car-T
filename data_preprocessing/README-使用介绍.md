# CAR-T æ²»ç–—ä¸´åºŠæ•°æ®å¤„ç†ç³»ç»Ÿ


> ä¸“ä¸šçš„CAR-Tç»†èƒæ²»ç–—ä¸´åºŠæ•°æ®å¤„ç†ç³»ç»Ÿï¼Œæ”¯æŒæ•°æ®éªŒè¯ã€å¤„ç†å’Œæ ‡å‡†åŒ–çš„å®Œæ•´å·¥ä½œæµç¨‹ã€‚

## ğŸ“‹ ç›®å½•

- [ç³»ç»Ÿæ¦‚è¿°](#ç³»ç»Ÿæ¦‚è¿°)
- [æ ¸å¿ƒç‰¹æ€§](#æ ¸å¿ƒç‰¹æ€§)
- [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
- [å®‰è£…æŒ‡å—](#å®‰è£…æŒ‡å—)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [é…ç½®ç®¡ç†](#é…ç½®ç®¡ç†)
- [ä¸»è¦åŠŸèƒ½](#ä¸»è¦åŠŸèƒ½)
- [æ•°æ®å¤„ç†æµç¨‹](#æ•°æ®å¤„ç†æµç¨‹)
- [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)
- [è¾“å…¥/è¾“å‡ºæ ¼å¼](#è¾“å…¥è¾“å‡ºæ ¼å¼)

## ğŸ¯ ç³»ç»Ÿæ¦‚è¿°

CAR-T æ•°æ®å¤„ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„Pythonåº”ç”¨ç¨‹åºï¼Œä¸“é—¨è®¾è®¡ç”¨äºå¤„ç†CAR-Tç»†èƒæ²»ç–—çš„ä¸´åºŠæ•°æ®ã€‚ç³»ç»Ÿé‡‡ç”¨ç°ä»£åŒ–çš„é…ç½®ç®¡ç†ã€æ­¥éª¤æ§åˆ¶å’ŒæŠ¥å‘Šç”Ÿæˆæœºåˆ¶ï¼Œç¡®ä¿æ•°æ®å¤„ç†çš„å‡†ç¡®æ€§å’Œå¯è¿½æº¯æ€§ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸ” æ™ºèƒ½æ•°æ®éªŒè¯**: å…¨é¢çš„æ•°æ®è´¨é‡æ£€æŸ¥å’Œç»“æ„éªŒè¯
- **âš™ï¸ çµæ´»æ•°æ®å¤„ç†**: 
  - æ”¯æŒæ‰€æœ‰8ç§ä¸´åºŠæ•°æ®ç±»å‹çš„åˆ—åˆ é™¤é…ç½®ï¼ˆCBCã€Biochemistryã€Coagulationã€Inflammatory Biomarkerã€VCNã€Lymphocyte Subsetsã€Electrolytesã€Vital Signsï¼‰
  - å¯é€‰çš„åˆ—é‡æ–°æ’åºåŠŸèƒ½ - å¯ä»¥é€‰æ‹©æ˜¯å¦åœ¨åˆ é™¤åˆ—åé‡æ–°ç¼–å·åˆ—åºåˆ—
  - çµæ´»çš„æ­¥éª¤æ§åˆ¶ - å¯å•ç‹¬æˆ–ç»„åˆæ‰§è¡ŒéªŒè¯å’Œå¤„ç†æ­¥éª¤
- **ğŸ“Š è¯¦ç»†æŠ¥å‘Šç”Ÿæˆ**: å®Œæ•´çš„éªŒè¯å’Œå¤„ç†æŠ¥å‘Š
- **ğŸ›ï¸ å¤šæ¨¡å¼æ”¯æŒ**: åŠ¨æ€æ—¶é—´åºåˆ—å’Œé™æ€æ•°æ®å¤„ç†
- **ğŸ”§ æ¨¡å—åŒ–æ¶æ„**: æ˜“äºæ‰©å±•å’Œç»´æŠ¤çš„ä»£ç ç»“æ„
- **ğŸ“ é›†ä¸­é…ç½®ç®¡ç†**: æ”¯æŒYAMLé…ç½®ã€ç¯å¢ƒå˜é‡å’Œå‘½ä»¤è¡Œå‚æ•°ï¼Œå‘½ä»¤è¡Œå‚æ•°å…·æœ‰æœ€é«˜ä¼˜å…ˆçº§
- **ğŸ› ï¸ Excelè½¬æ¢å·¥å…·**: æ‰¹é‡å°† Excel æ–‡ä»¶è½¬æ¢ä¸º CSV æ ¼å¼

## ğŸ“ é¡¹ç›®ç»“æ„

### å®Œæ•´æ–‡ä»¶ç»“æ„æ¦‚è§ˆ

```
/home/phl/PHL/Car-T/data_processing/
â”œâ”€â”€ ğŸš€ ä¸»ç¨‹åºæ–‡ä»¶
â”‚   â””â”€â”€ data_processed.py              # ä¸»å…¥å£æ–‡ä»¶å’Œå·¥ä½œæµç¨‹åè°ƒå™¨
â”‚
â”œâ”€â”€ ğŸ› ï¸ å·¥å…·æ¨¡å— (utils/)
â”‚   â”œâ”€â”€ __init__.py                    # æ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ config_manager.py              # é…ç½®ç®¡ç†æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ cli_parser.py                  # å‘½ä»¤è¡Œå‚æ•°è§£æå™¨
â”‚   â””â”€â”€ format_xlsx_to_csv.py          # Excelè½¬CSVæ ¼å¼è½¬æ¢å·¥å…·
â”‚
â”œâ”€â”€ ğŸ“¦ åŠ¨æ€æ•°æ®å¤„ç†æ¨¡å— (dynamic_data_processing/)
â”‚   â”œâ”€â”€ __init__.py                    # æ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ validator.py                   # æ•°æ®éªŒè¯å™¨ - æ–‡ä»¶ç»“æ„å’Œæ•°æ®è´¨é‡æ£€æŸ¥
â”‚   â”œâ”€â”€ processor.py                   # æ•°æ®å¤„ç†å™¨ - åˆ—æ“ä½œå’Œæ•°æ®æ¸…ç†
â”‚   â””â”€â”€ step_executor.py               # æ­¥éª¤æ‰§è¡Œå™¨ - å·¥ä½œæµç¨‹æ§åˆ¶
â”‚
â”œâ”€â”€ ğŸ”§ é™æ€æ•°æ®å¤„ç†æ¨¡å— (static_data_processing/)
â”‚   â”œâ”€â”€ __init__.py                    # æ¨¡å—åˆå§‹åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ static_validator.py            # é™æ€æ•°æ®éªŒè¯å™¨
â”‚   â”œâ”€â”€ static_processor.py            # é™æ€æ•°æ®å¤„ç†å™¨
â”‚   â””â”€â”€ static_converters.py           # æ•°æ®è½¬æ¢å‡½æ•°é›†
â”‚
â”œâ”€â”€ âš™ï¸ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ config.yaml                    # ä¸»é…ç½®æ–‡ä»¶ï¼ˆé‡æ–°ç»„ç»‡ç»“æ„ï¼‰
â”‚   â””â”€â”€ config_sample.yaml             # ç¤ºä¾‹é…ç½®æ–‡ä»¶æ¨¡æ¿
â”‚
â”œâ”€â”€ ğŸ“„ æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                      # é¡¹ç›®æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚   â””â”€â”€ READMEa.md                     # å‚è€ƒæ–‡æ¡£
â”‚
â””â”€â”€ ğŸ“‚ è¾“å‡ºç›®å½•
    â””â”€â”€ output/                        # å¤„ç†åæ•°æ®çš„è¾“å‡ºç›®å½•
```

##  å®‰è£…æŒ‡å—

### ç³»ç»Ÿè¦æ±‚

- **Python**: 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬
- **æ“ä½œç³»ç»Ÿ**: Linux, macOS, Windows
- **å†…å­˜**: å»ºè®® 4GB æˆ–æ›´å¤šï¼ˆç”¨äºå¤§æ•°æ®é›†å¤„ç†ï¼‰

### ä¾èµ–é¡¹å®‰è£…

```bash
# å®‰è£…æ ¸å¿ƒä¾èµ–
pip install pandas>=1.3.0 numpy>=1.21.0 pyyaml>=5.4.0
```

### ç¯å¢ƒè®¾ç½®

1. **è¿›å…¥é¡¹ç›®ç›®å½•**:
   ```bash
   cd /home/phl/PHL/Car-T/data_processing
   ```

2. **éªŒè¯å®‰è£…**:
   ```bash
   python data_processed.py --help
   ```

3. **åˆ›å»ºè¾“å‡ºç›®å½•**ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰:
   ```bash
   mkdir -p output
   ```

## âš¡ å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /home/phl/PHL/Car-T/data_processing

# 2. åˆ›å»ºç¤ºä¾‹é…ç½®æ–‡ä»¶
python data_processed.py --create-sample-config

# 3. æŸ¥çœ‹å½“å‰é…ç½®
python data_processed.py --print-config
```

### ç¬¬äºŒæ­¥ï¼šæ•°æ®é¢„å¤„ç†ï¼ˆå¯é€‰ï¼‰

å¦‚æœæ‚¨çš„æ•°æ®æ˜¯ Excel æ ¼å¼ï¼Œé¦–å…ˆéœ€è¦è½¬æ¢ä¸º CSVï¼š

```bash
# Excel è½¬ CSVï¼ˆæ‰¹é‡å¤„ç†ï¼‰
python utils/format_xlsx_to_csv.py
```

### ç¬¬ä¸‰æ­¥ï¼šé…ç½®æ•°æ®è·¯å¾„

ç¼–è¾‘ `config.yaml` æ–‡ä»¶ï¼Œè®¾ç½®æ‚¨çš„æ•°æ®è·¯å¾„ï¼š

```yaml
# åŠ¨æ€æ•°æ®è·¯å¾„
input_dir: /path/to/your/input/data
output_dir: /path/to/your/output/data

# é™æ€æ•°æ®è·¯å¾„
static_input_file: /path/to/patient_info.csv
static_output_file: /path/to/output/processed_static_data.csv
```

### ç¬¬å››æ­¥ï¼šè¿è¡Œæ•°æ®å¤„ç†

```bash
# åŠ¨æ€æ•°æ®ï¼šå…ˆéªŒè¯ï¼Œåå¤„ç†
python data_processed.py --mode dynamic --validation-only --config config.yaml
python data_processed.py --mode dynamic --processing-only --config config.yaml

# æˆ–ä¸€æ¬¡æ€§å®ŒæˆéªŒè¯å’Œå¤„ç†
python data_processed.py --mode dynamic --validation-only --processing-only --config config.yaml

# é™æ€æ•°æ®å¤„ç†
python data_processed.py --mode static --validation-only --config config.yaml
python data_processed.py --mode static --processing-only --config config.yaml
```

### å¸¸ç”¨å‘½ä»¤å‚è€ƒ

| å‘½ä»¤ | è¯´æ˜ |
|------|------|
| `--mode dynamic` | å¤„ç†åŠ¨æ€æ—¶é—´åºåˆ—æ•°æ® |
| `--mode static` | å¤„ç†é™æ€æ‚£è€…åŸºç¡€ä¿¡æ¯ |
| `--validation-only` | åªæ‰§è¡Œæ•°æ®éªŒè¯ |
| `--processing-only` | åªæ‰§è¡Œæ•°æ®å¤„ç† |
| `--config config.yaml` | æŒ‡å®šé…ç½®æ–‡ä»¶ |
| `--help` | æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‚æ•° |

### æ‰§è¡Œæ¨¡å¼è¯´æ˜

| æ‰§è¡Œæ¨¡å¼ | å‘½ä»¤å‚æ•° | ä½¿ç”¨åœºæ™¯ |
|---------|---------|---------|
| **ä»…éªŒè¯** | `--validation-only` | å¿«é€Ÿæ£€æŸ¥æ•°æ®è´¨é‡ |
| **ä»…å¤„ç†** | `--processing-only` | æ•°æ®å·²éªŒè¯ï¼Œç›´æ¥å¤„ç† |
| **éªŒè¯+å¤„ç†** | `--validation-only --processing-only` | å®Œæ•´çš„æ•°æ®å¤„ç†æµç¨‹ |
| **é…ç½®æ–‡ä»¶æ§åˆ¶** | ä¸æŒ‡å®šæ­¥éª¤å‚æ•° | ä½¿ç”¨é…ç½®æ–‡ä»¶ä¸­çš„è®¾ç½® |

### åˆ—åˆ é™¤é…ç½®ç¤ºä¾‹

å¦‚éœ€åˆ é™¤ç‰¹å®šåˆ—ï¼Œåœ¨ `config.yaml` ä¸­é…ç½®ï¼š

```yaml
# å¯ç”¨åˆ—åˆ é™¤
enable_column_deletion: true

# é…ç½®è¦åˆ é™¤çš„åˆ—ï¼ˆæ”¯æŒ8ç§æ•°æ®ç±»å‹ï¼‰
columns_to_delete:
  cbc: [2, 4, 6]              # åˆ é™¤ CBC002, CBC004, CBC006
  biochemistry: [3, 7]         # åˆ é™¤ Biochemistry003, 007
  coagulation: [8]             # åˆ é™¤ Coagulation008
  inflammatory_biomarker: []   # ç‚ç—‡æ ‡å¿—ç‰©ï¼ˆä¸åˆ é™¤ï¼‰
  vcn: []                      # ç—…æ¯’æ‹·è´æ•°ï¼ˆä¸åˆ é™¤ï¼‰
  lymphocyte_subsets: []       # æ·‹å·´ç»†èƒäºšç¾¤ï¼ˆä¸åˆ é™¤ï¼‰
  electrolytes: []             # ç”µè§£è´¨ï¼ˆä¸åˆ é™¤ï¼‰
  vital_signs: []              # ç”Ÿå‘½ä½“å¾ï¼ˆä¸åˆ é™¤ï¼‰

# åˆ—é‡æ–°æ’åºï¼ˆå¯é€‰ï¼‰
enable_column_reordering: true  # true=è¿ç»­ç¼–å·, false=ä¿ç•™åŸç¼–å·
column_prefixes_to_reorder:
  - "CBC"
  - "Biochemistry"
  - "Coagulation"
```

**åˆ—é‡æ–°æ’åºè¯´æ˜ï¼š**
- `enable_column_reordering: true` - åˆ é™¤åé‡æ–°ç¼–å·ä¸ºè¿ç»­åºåˆ—ï¼ˆä¾‹å¦‚ï¼šCBC001, CBC002, CBC003ï¼‰
- `enable_column_reordering: false` - ä¿ç•™åŸå§‹ç¼–å·ï¼ˆä¾‹å¦‚ï¼šCBC001, CBC003, CBC005ï¼‰

## âš™ï¸ é…ç½®ç®¡ç†

ç³»ç»Ÿæ”¯æŒå¤šå±‚é…ç½®ï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åºï¼š
1. **å‘½ä»¤è¡Œå‚æ•°**ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰
2. **YAMLé…ç½®æ–‡ä»¶**
3. **ç¯å¢ƒå˜é‡**ï¼ˆæœ€ä½ä¼˜å…ˆçº§ï¼‰

### YAMLé…ç½®æ–‡ä»¶

é…ç½®æ–‡ä»¶ä½äºé¡¹ç›®æ ¹ç›®å½•çš„ `config.yaml`ã€‚ä»¥ä¸‹æ˜¯ä¸»è¦é…ç½®é¡¹ï¼š

```yaml
# é™æ€æ•°æ®é…ç½®
static_input_file: /path/to/patient_info.csv
static_output_file: /path/to/processed_static_data.csv
static_expected_column_count: 22
static_expected_patient_count: 500

# åŠ¨æ€æ•°æ®é…ç½®
input_dir: /path/to/input/data
output_dir: /path/to/output/data
dynamic_expected_file_count: 500
dynamic_expected_row_count: 46

# åˆ—åˆ é™¤é…ç½®ï¼ˆæ”¯æŒ8ç§æ•°æ®ç±»å‹ï¼‰
enable_column_deletion: true
columns_to_delete:
  cbc: [2, 4, 6, 8, 10]
  biochemistry: [3, 7]
  coagulation: [8]
  inflammatory_biomarker: []
  vcn: []
  lymphocyte_subsets: []
  electrolytes: []
  vital_signs: []

# åˆ—é‡æ–°æ’åºé…ç½®
enable_column_reordering: true
column_prefixes_to_reorder:
  - "CBC"
  - "Biochemistry"
  - "Coagulation"
```

### æ”¯æŒçš„æ•°æ®ç±»å‹

| æ•°æ®ç±»å‹ | é…ç½®é”® | åˆ—å‰ç¼€ | ç¤ºä¾‹ |
|---------|--------|--------|------|
| è¡€å¸¸è§„ | `cbc` | CBC | CBC001, CBC002, ... |
| ç”ŸåŒ–æŒ‡æ ‡ | `biochemistry` | Biochemistry | Biochemistry001, ... |
| å‡è¡€åŠŸèƒ½ | `coagulation` | Coagulation | Coagulation001, ... |
| ç‚ç—‡æ ‡å¿—ç‰© | `inflammatory_biomarker` | Inflammatory Biomarker | Inflammatory Biomarker001, ... |
| ç—…æ¯’æ‹·è´æ•° | `vcn` | VCN | VCN001, ... |
| æ·‹å·´ç»†èƒäºšç¾¤ | `lymphocyte_subsets` | Lymphocyte Subsets | Lymphocyte Subsets001, ... |
| ç”µè§£è´¨ | `electrolytes` | Electrolytes | Electrolytes001, ... |
| ç”Ÿå‘½ä½“å¾ | `vital_signs` | Vital Signs | Vital Signs001, ... |

### åˆ—é‡æ–°æ’åºè¯´æ˜

**å¯ç”¨é‡æ–°æ’åº** (`enable_column_reordering: true`):
- åˆ é™¤åˆ—åï¼Œå‰©ä½™åˆ—é‡æ–°ç¼–å·ä¸ºè¿ç»­åºåˆ—
- ç¤ºä¾‹ï¼šåˆ é™¤ CBC002, CBC004 å
  - åŸå§‹: `CBC001, CBC002, CBC003, CBC004, CBC005`
  - ç»“æœ: `CBC001, CBC002, CBC003`

**ç¦ç”¨é‡æ–°æ’åº** (`enable_column_reordering: false`):
- åˆ é™¤åˆ—åï¼Œä¿ç•™åŸå§‹ç¼–å·ï¼ˆæœ‰é—´éš™ï¼‰
- ç¤ºä¾‹ï¼šåˆ é™¤ CBC002, CBC004 å
  - åŸå§‹: `CBC001, CBC002, CBC003, CBC004, CBC005`
  - ç»“æœ: `CBC001, CBC003, CBC005`

### ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

ä¹Ÿå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡è®¾ç½®åŸºæœ¬é…ç½®ï¼š

```bash
export CART_INPUT_DIR="/path/to/input"
export CART_OUTPUT_DIR="/path/to/output"
export CART_ENABLE_COLUMN_DELETION=false
export CART_VERBOSE=true
```

**æ³¨æ„**ï¼šå…·ä½“çš„åˆ—åˆ é™¤é…ç½®ï¼ˆ`columns_to_delete`ï¼‰åªèƒ½é€šè¿‡ YAML æ–‡ä»¶æŒ‡å®šã€‚

## ğŸš€ ä¸»è¦åŠŸèƒ½

### åŠ¨æ€æ•°æ®å¤„ç†
- **æ•°æ®éªŒè¯**: éªŒè¯æ—¶é—´åºåˆ—CSVæ–‡ä»¶çš„ç»“æ„å’Œæ•°æ®è´¨é‡
- **åˆ—åˆ é™¤**: æ”¯æŒ8ç§ä¸´åºŠæ•°æ®ç±»å‹çš„çµæ´»é…ç½®
- **åˆ—é‡æ–°æ’åº**: å¯é€‰æ‹©è¿ç»­ç¼–å·æˆ–ä¿ç•™åŸå§‹ç¼–å·
- **çµæ´»æ­¥éª¤æ§åˆ¶**: å¯å•ç‹¬æˆ–ç»„åˆæ‰§è¡ŒéªŒè¯å’Œå¤„ç†æ­¥éª¤
- **æŠ¥å‘Šç”Ÿæˆ**: è¯¦ç»†çš„éªŒè¯å’Œå¤„ç†æŠ¥å‘Š

### é™æ€æ•°æ®å¤„ç†
- **æ ‡å‡†åŒ–ç¼–ç **: å°†ä¸­æ–‡ç¼–ç è½¬æ¢ä¸ºè‹±æ–‡æ ‡å‡†ç¼–ç 
- **æ•°æ®ç±»å‹è½¬æ¢**: æ™ºèƒ½åˆ†ç±»å’Œæ•°å€¼é‡æ–°åˆ†ç±»
- **æ—¥æœŸæ ¼å¼ç»Ÿä¸€**: æ ‡å‡†åŒ–æ—¥æœŸæ ¼å¼
- **ä¸´åºŠå˜é‡æ˜ å°„**: ä¸“ä¸šçš„åŒ»å­¦æœ¯è¯­æ ‡å‡†åŒ–

### æ•°æ®æ ¼å¼è½¬æ¢
- **Excelè½¬CSV**: æ‰¹é‡å°† .xlsx æ–‡ä»¶è½¬æ¢ä¸º CSV æ ¼å¼
- **è‡ªåŠ¨åŒ–å¤„ç†**: è‡ªåŠ¨åˆ›å»ºè¾“å‡ºç›®å½•ï¼Œä¿æŒæ–‡ä»¶åç»“æ„
- **é”™è¯¯å¤„ç†**: è·³è¿‡æŸåæ–‡ä»¶ï¼Œæ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯

## ğŸ“Š æ•°æ®å¤„ç†æµç¨‹

### åŠ¨æ€æ•°æ®éªŒè¯æµç¨‹
1. æ£€æŸ¥æ–‡ä»¶æ•°é‡æ˜¯å¦ç¬¦åˆé¢„æœŸ
2. éªŒè¯æ¯ä¸ªæ–‡ä»¶çš„åˆ—æ•°å’Œç»“æ„
3. æ£€æŸ¥æ•°æ®ç±»å‹å’Œæ ¼å¼ï¼ˆæ•°å€¼æˆ–NAï¼‰
4. æ£€æŸ¥æ—¶é—´ç´¢å¼•å®Œæ•´æ€§
5. ç”Ÿæˆè¯¦ç»†éªŒè¯æŠ¥å‘Š

### åŠ¨æ€æ•°æ®å¤„ç†æµç¨‹
1. **åˆ—åˆ é™¤**ï¼šæ ¹æ®é…ç½®åˆ é™¤æŒ‡å®šåˆ—ï¼ˆæ”¯æŒ8ç§æ•°æ®ç±»å‹ï¼‰
2. **åˆ—é‡æ–°æ’åº**ï¼šæ ¹æ®é…ç½®é€‰æ‹©æ˜¯å¦é‡æ–°ç¼–å·
   - å¯ç”¨ï¼šé‡æ–°ç¼–å·ä¸ºè¿ç»­åºåˆ—
   - ç¦ç”¨ï¼šä¿ç•™åŸå§‹ç¼–å·
3. **ä¿å­˜ç»“æœ**ï¼šè¾“å‡ºå¤„ç†åçš„æ–‡ä»¶
4. **ç”ŸæˆæŠ¥å‘Š**ï¼šè®°å½•æ‰€æœ‰åˆ é™¤å’Œé‡å‘½åæ“ä½œ

### é™æ€æ•°æ®å¤„ç†æµç¨‹
1. è¯»å–æ‚£è€…åŸºç¡€ä¿¡æ¯CSV
2. æ ‡å‡†åŒ–æ€§åˆ«ã€ç–¾ç—…ç±»å‹ç­‰åˆ†ç±»å˜é‡
3. é‡æ–°åˆ†ç±»æ•°å€¼å‹å˜é‡
4. ç»Ÿä¸€æ—¥æœŸæ ¼å¼
5. è¾“å‡ºæ ‡å‡†åŒ–æ•°æ®æ–‡ä»¶

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: é…ç½®æ–‡ä»¶åŠ è½½å¤±è´¥**
- æ£€æŸ¥é…ç½®æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
- éªŒè¯ YAML æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆæ³¨æ„ç¼©è¿›ï¼‰
- ç¡®ä¿æ–‡ä»¶ç¼–ç ä¸º UTF-8

**Q: æ•°æ®éªŒè¯å¤±è´¥**
- æ£€æŸ¥è¾“å…¥æ•°æ®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- éªŒè¯æ–‡ä»¶æ ¼å¼æ˜¯å¦ä¸º CSV
- æ£€æŸ¥åˆ—æ•°å’Œè¡Œæ•°æ˜¯å¦ç¬¦åˆé…ç½®çš„é¢„æœŸå€¼
- æŸ¥çœ‹éªŒè¯æŠ¥å‘Šäº†è§£å…·ä½“é”™è¯¯

**Q: åˆ—åˆ é™¤ä¸ç”Ÿæ•ˆ**
- ç¡®ä¿ `enable_column_deletion: true`
- æ£€æŸ¥åˆ—ç´¢å¼•å·æ˜¯å¦æ­£ç¡®
- éªŒè¯æ•°æ®ç±»å‹é…ç½®é”®æ˜¯å¦æ­£ç¡®ï¼ˆå¦‚ `cbc`ã€`biochemistry`ï¼‰

**Q: åˆ—é‡æ–°æ’åºé—®é¢˜**
- ç¡®è®¤ `enable_column_reordering` è®¾ç½®
- æ£€æŸ¥ `column_prefixes_to_reorder` åˆ—è¡¨æ˜¯å¦åŒ…å«éœ€è¦çš„å‰ç¼€
- æŸ¥çœ‹å¤„ç†æŠ¥å‘Šäº†è§£é‡å‘½åè¯¦æƒ…

### è°ƒè¯•æ¨¡å¼

```bash
# å¯ç”¨è¯¦ç»†è¾“å‡º
python data_processed.py --mode dynamic --verbose --config config.yaml

# æŸ¥çœ‹å®Œæ•´é…ç½®
python data_processed.py --print-config

# æµ‹è¯•é…ç½®ï¼ˆä¸æ‰§è¡Œå¤„ç†ï¼‰
python data_processed.py --print-config --config test_config.yaml
```

### è·å–å¸®åŠ©

```bash
# æŸ¥çœ‹æ‰€æœ‰å¯ç”¨å‚æ•°
python data_processed.py --help

# ç”Ÿæˆç¤ºä¾‹é…ç½®æ–‡ä»¶
python data_processed.py --create-sample-config
```

## ğŸ“ è¾“å…¥/è¾“å‡ºæ ¼å¼

### åŠ¨æ€æ•°æ®
- **è¾“å…¥**: `input_dir` æ–‡ä»¶å¤¹ä¸­çš„æ—¶é—´åºåˆ—CSVæ–‡ä»¶
  - æ–‡ä»¶å‘½åæ ¼å¼: `P001_processed.csv`, `P002_processed.csv` ç­‰
  - åŒ…å«æ—¶é—´ç‚¹åˆ—å’Œå„ç±»ä¸´åºŠæŒ‡æ ‡åˆ—
- **è¾“å‡º**: `output_dir` æ–‡ä»¶å¤¹ä¸­çš„å¤„ç†åCSVæ–‡ä»¶
  - ä¿æŒåŸæ–‡ä»¶å
  - åˆ—å·²æŒ‰é…ç½®åˆ é™¤å’Œé‡æ–°æ’åº
  - ç”ŸæˆéªŒè¯å’Œå¤„ç†æŠ¥å‘Š

### é™æ€æ•°æ®
- **è¾“å…¥**: æ‚£è€…åŸºç¡€ä¿¡æ¯CSVæ–‡ä»¶
  - åŒ…å«æ‚£è€…IDã€æ€§åˆ«ã€å¹´é¾„ã€ç–¾ç—…ç±»å‹ç­‰ä¿¡æ¯
- **è¾“å‡º**: æ ‡å‡†åŒ–ç¼–ç åçš„CSVæ–‡ä»¶
  - ä¸­æ–‡è½¬ä¸ºè‹±æ–‡ç¼–ç 
  - æ—¥æœŸæ ¼å¼ç»Ÿä¸€
  - åˆ†ç±»å˜é‡æ ‡å‡†åŒ–

### Excelè½¬CSVå·¥å…·
- **è¾“å…¥**: .xlsx æ ¼å¼çš„ Excel æ–‡ä»¶
- **è¾“å‡º**: UTF-8 ç¼–ç çš„ CSV æ–‡ä»¶
- **ä½ç½®**: `utils/format_xlsx_to_csv.py`

---

**âš ï¸ é‡è¦æç¤º**: æœ¬ç³»ç»Ÿä¸“ä¸ºCAR-Tæ²»ç–—ä¸´åºŠæ•°æ®å¤„ç†è®¾è®¡ã€‚åœ¨å¤„ç†çœŸå®æ‚£è€…æ•°æ®æ—¶ï¼Œè¯·ç¡®ä¿éµå¾ªç›¸å…³åŒ»å­¦ç ”ç©¶ä¼¦ç†è§„èŒƒå’Œæ•°æ®ä¿æŠ¤æ³•è§„ã€‚